

<!doctype html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>Document</title>
<!-- 		<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="./javascripts/jquery-2.1.4.min.js"></script>
		<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>>

		<link rel="stylesheet" href="http://cache.amap.com/lbs/static/main.css?v=1.0" />
		<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=ebb3310e602e7027987911af5e30be56"></script> -->
	</head>

	<body>
		<div id="mapContainer" style='width:800px;height:550px;border-radius: 15px; margin-left:15px;'>
		<script>
			var evt=null;
			var map = new AMap.Map('mapContainer',{
				//resizeEnable: true,
				//rotateEnable: true,
				//dragEnable: true,
				//zoomEnable: true,
				//设置可缩放的级别
				//zooms: [3,18], //手机上默认为3~19缩放比例
				//传入2D视图，设置中心点和缩放级别
				view: new AMap.View2D({
					center: new AMap.LngLat(116.397428, 39.90923),//120.001574,36.032374
					zoom: 18
				})
			});
			
			var listener = 
			AMap.event.addListener(map,"dblclick",eventHandler);
			
			function eventHandler(e){
				evt=e;
			/*	var lnglat = e.lnglat;
				alert(lnglat.lng); //经度
				alert(lnglat.lat);	//纬度*/
				$('#myModal').modal('show');
			}
			function dian(){
				//alert($('#name').val());
				marker = new AMap.Marker({
					map:map,
					position:evt.lnglat,
					icon:"http://webapi.amap.com/images/0.png",
					title:$('#jie').val(),
					offset:new AMap.Pixel(-15,-20)
				});
				marker.setMap(map);
				marker.setLabel({
						offset:new AMap.Pixel(-20,-20),
						content:$('#name').val()
					});
//				var marker = new AMap.Marker({
//					map:map,
//					position:evt.lnglat,
//					tile:'$('#name').val()',
//					icon:"http://webapi.amap.com/images/0.png",
//					offset:new AMap.Pixel(-10,-34),
//				});
//				marker.setMap(map);
//				marker.setLabel({
//					offset:new AMap.Pixel(0,-20),
//					content::$('#jie').val();
//				});
			}

		</script>
		</div>
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							&times;
						</button>
						<h4 class="modal-title" id="myModalLabel">
							信息
						</h4>
					</div>
					<div class="modal-body" align="center">
						名称：<input type="text" id="name" />
						简介：<input type="text" id="jie" />
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default"  data-dismiss="modal">关闭
						</button>
						<button type="button" class="btn btn-primary" onclick='dian();'  data-dismiss="modal">
							提交
						</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal -->
		</div>
	</body>
</html>	 